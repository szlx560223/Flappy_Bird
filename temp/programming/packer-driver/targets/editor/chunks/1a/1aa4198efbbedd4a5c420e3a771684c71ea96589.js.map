{"version":3,"sources":["file:///E:/04Project/Cocos/FlappyBird/assets/script/BirdCtrl.ts"],"names":["_decorator","Component","Node","RigidBody","v3","input","Input","PhysicsSystem","SphereCollider","EnumGameStatus","GameManager","ccclass","property","BirdCtrl","start","init","Bird","setPosition","on","EventType","MOUSE_DOWN","onMouseClick","instance","gravity","getComponent","linearDamping","coms","getComponents","onHit","getScore","event","setLinearVelocity","console","log","GameManagerScript","gameStatus","die","score"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAmBC,MAAAA,a,OAAAA,a;AAAgCC,MAAAA,c,OAAAA,c;;AACtGC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,W,iBAAAA,W;;;;;;;OACnB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;0BAGjBa,Q,WADZF,OAAO,CAAC,UAAD,C,UAGHC,QAAQ,CAACV,IAAD,C,UAGRU,QAAQ;AAAA;AAAA,qC,2BANb,MACaC,QADb,SAC8BZ,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAOxC;AACIa,QAAAA,KAAK,GAAG;AACJ,eAAKC,IAAL;AACH,SAVmC,CAWxC;;;AACIA,QAAAA,IAAI,GAAE;AACF,eAAKC,IAAL,CAAUC,WAAV,CAAsBb,EAAE,CAAC,GAAD,EAAK,GAAL,EAAS,CAAT,CAAxB,EADE,CACkC;;AACpCC,UAAAA,KAAK,CAACa,EAAN,CAASZ,KAAK,CAACa,SAAN,CAAgBC,UAAzB,EAAoC,KAAKC,YAAzC,EAAsD,IAAtD,EAFE,CAE0D;;AAC5Dd,UAAAA,aAAa,CAACe,QAAd,CAAuBC,OAAvB,GAA+BnB,EAAE,CAAC,CAAD,EAAG,CAAC,GAAJ,EAAQ,CAAR,CAAjC,CAHE,CAG0C;;AAC5C,eAAKY,IAAL,CAAUQ,YAAV,CAAuBrB,SAAvB,EAAkCsB,aAAlC,GAAgD,GAAhD,CAJE,CAIkD;AACpD;;AACA,cAAIC,IAAI,GAAC,KAAKV,IAAL,CAAUW,aAAV,CAAwBnB,cAAxB,CAAT,CANE,CAM+C;;AACjDkB,UAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQR,EAAR,CAAW,kBAAX,EAA8B,KAAKU,KAAnC,EAAyC,IAAzC,EAPE,CAO6C;;AAC/CF,UAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQR,EAAR,CAAW,gBAAX,EAA4B,KAAKW,QAAjC,EAA0C,IAA1C,EARE,CAQ6C;AAClD;;AACDR,QAAAA,YAAY,CAACS,KAAD,EAAmB;AAAC;AAC5B,eAAKd,IAAL,CAAUQ,YAAV,CAAuBrB,SAAvB,EAAkC4B,iBAAlC,CAAoD3B,EAAE,CAAC,CAAD,EAAG,GAAH,EAAO,CAAP,CAAtD,EAD2B,CACsC;AACpE;;AACDwB,QAAAA,KAAK,CAACE,KAAD,EAAwB;AAAC;AAC1BE,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,eAAKC,iBAAL,CAAuBC,UAAvB,GAAoC;AAAA;AAAA,gDAAeC,GAAnD,CAFyB,CAE8B;AAE1D;;AACDP,QAAAA,QAAQ,CAACC,KAAD,EAAwB;AAC5BE,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,eAAKC,iBAAL,CAAuBG,KAAvB;AACH;;AAjCmC,O;;;;;iBAGxB,I;;;;;;;iBAGoB,I","sourcesContent":["//BirdCtrl.ts\nimport { _decorator, Component, Node, RigidBody, v3, input, Input, EventMouse, PhysicsSystem, ICollisionEvent, SphereCollider } from 'cc';\nimport { EnumGameStatus, GameManager } from './GameManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('BirdCtrl')\nexport class BirdCtrl extends Component {\n    //鸟所在的节点\n    @property(Node)\n    Bird:Node = null!\n    //GameManager脚本\n    @property(GameManager)\n    GameManagerScript:GameManager = null!\n///////////////////////////////////////////////\n    start() {\n        this.init()\n    }\n///////////////////////////////////////////////\n    init(){\n        this.Bird.setPosition(v3(160,320,0))//设置初始位置\n        input.on(Input.EventType.MOUSE_DOWN,this.onMouseClick,this);//开启输入监听\n        PhysicsSystem.instance.gravity=v3(0,-500,0);//设置重力\n        this.Bird.getComponent(RigidBody).linearDamping=0.1;//设置速度阻尼\n        //this.Bird.getComponent(Collider).on('onTriggerEnter',this.onHit,this)//原来的开启碰撞检测\n        let coms=this.Bird.getComponents(SphereCollider);//两个球体碰撞箱组件\n        coms[0].on('onCollisionEnter',this.onHit,this);//第一个碰撞箱，不使用触发器，对障碍物进行判断\n        coms[1].on('onTriggerEnter',this.getScore,this)//第二个碰撞箱，使用触发器，对分数进行判断\n    }\n    onMouseClick(event: EventMouse){//鼠标输入\n        this.Bird.getComponent(RigidBody).setLinearVelocity(v3(0,300,0));//更改速度为向上\n    }\n    onHit(event: ICollisionEvent){//撞上柱子\n        console.log(\"Hit\");\n        this.GameManagerScript.gameStatus = EnumGameStatus.die;//碰撞后死亡\n\n    }\n    getScore(event: ICollisionEvent){\n        console.log(\"Scored\");\n        this.GameManagerScript.score++;\n    }\n}\n\n"]}